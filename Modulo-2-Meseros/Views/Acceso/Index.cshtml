@model Modulo_2_Meseros.Models.DTO.LoginDTO
@{
    ViewData["Title"] = "Login";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Modulo Meseros</title>
    <!-- Ionicons para iconos -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- CSS externo -->
    <link rel="stylesheet" href="~/css/Login.css">
    <!-- jQuery Validation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js"></script>
</head>
<body>
    <section>
        <form asp-action="Login" method="post">
            <h1>Login</h1>

            <div asp-validation-summary="ModelOnly" class="validation-errors"></div>

            <div class="inputbox">
                <ion-icon name="mail-outline"></ion-icon>
                <input asp-for="Correo" type="email" required>
                <label>Correo electrónico</label>
                <span asp-validation-for="Correo" class="text-error"></span>
            </div>

            <div class="inputbox">
                <ion-icon name="lock-closed-outline"></ion-icon>
                <input asp-for="Clave" type="password" required>
                <label>Contraseña</label>
                <span asp-validation-for="Clave" class="text-error"></span>
            </div>
            

            <button type="submit">Iniciar sesión</button>
        </form>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var token = '@Html.Raw(ViewData["Token"])';

            if (token && token !== 'null' && token.trim() !== '') {
                localStorage.setItem('authToken', token);
                window.location.href = '@Url.Action("EstadoMesas", "Mesero")';
            }
        });
    </script>
</body>
</html>